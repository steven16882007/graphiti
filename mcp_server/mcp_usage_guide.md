## Graphiti 記憶工具的 MCP 代理使用指南

本指南為使用 Graphiti MCP 工具進行持久記憶管理的 AI 代理提供使用說明。

### 開始任何任務之前

- **始終先搜索：** 在開始工作之前，使用 `search_memory_nodes` 工具查找相關的偏好設置和程序。
- **同時搜索事實：** 使用 `search_memory_facts` 工具發現可能與您的任務相關的關係和事實資訊。
- **按實體類型過濾：** 在節點搜索中指定 "Preference"（偏好）或 "Procedure"（程序）以獲得針對性結果。
- **審查所有匹配項：** 仔細檢查與當前任務匹配的任何偏好、程序或事實。

### 始終保存新的或更新的資訊

- **立即捕獲需求和偏好：** 當用戶表達需求或偏好時，立即使用 `add_memory_episode` 存儲它們。最佳實踐是將很長的需求拆分為較短的邏輯塊。
- **明確標識更新：** 如果某些內容是對現有知識的更新，請明確說明。
- **清晰記錄程序：** 當您了解用戶希望如何完成某些操作時，將其記錄為程序。
- **記錄事實關係：** 當您了解到實體之間的連接時，將這些資訊存儲為事實。
- **清晰標記：** 為偏好和程序標注清晰的類別，以便日後更好地檢索。

### 工作過程中

- **遵循發現的偏好：** 使您的工作與找到的任何偏好保持一致。
- **嚴格按照程序執行：** 如果找到適用於當前任務的程序，請嚴格按步驟執行。
- **應用相關事實：** 使用事實資訊來指導您的決策和建議。
- **保持一致性：** 與先前識別的偏好、程序和事實保持一致。

### VS Code 整合（當可用時）

當配置了 VS Code UI Bridge 擴展時，您還可以：

- **獲取當前上下文：** 使用 `vscode_get_context` 查看當前 VS Code 工作區、開啟的檔案和診斷資訊。
- **高效導航：** 使用 `vscode_open_file` 和 `vscode_reveal` 引導用戶到特定檔案和位置。
- **應用精確編輯：** 使用 `vscode_apply_edit` 基於當前上下文進行精確的代碼修改。
- **處理可見內容：** 在提供協助時參考用戶在編輯器中實際看到的內容。

### 最佳實踐

- **建議前先搜索：** 在提出建議之前，始終檢查是否存在既定知識。
- **結合節點和事實搜索：** 對於複雜任務，同時搜索節點和事實以構建完整圖景。
- **使用 center_node_uuid：** 在探索相關資訊時，圍繞特定節點進行搜索。
- **優先考慮具體匹配：** 更具體的資訊優先於一般資訊。
- **主動識別模式：** 如果您注意到用戶行為中的模式，考慮將其存儲為偏好或程序。

**重要提醒：** 知識圖譜是您的記憶。持續使用它來提供個性化協助，尊重用戶既定的偏好、程序和事實背景。
